<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Plugin Core &mdash; NRP RobotDesigner 3.2 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/hbp_32x32.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="robot_designer_plugin.core.conditions module" href="../apidoc/robot_designer_plugin.core.conditions.html" />
    <link rel="prev" title="Developing the RobotDesigner" href="environment.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> NRP RobotDesigner
          </a>
              <div class="version">
                3.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">The Blender RobotDesigner of the Neurorobotics Platform (NRP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_manual/index.html">User Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developers Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#introduction">Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#contents">Contents</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="environment.html">Developing the RobotDesigner</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">The Plugin Core</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#blender-concepts">Blender concepts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#suggested-plugin-structure-and-templates">Suggested plugin structure and templates</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-reference">API reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/modules.html">robot_designer_plugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../planned.html">Roadmap</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NRP RobotDesigner</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Developers Manual</a> &raquo;</li>
      <li>The Plugin Core</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/developer_manual/plugin_core.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="the-plugin-core">
<h1>The Plugin Core<a class="headerlink" href="#the-plugin-core" title="Permalink to this headline"></a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline"></a></h2>
<p>The core of the <em>HBP/NRP RobotDesigner</em> is a package located at <a class="reference internal" href="#module-robot_designer_plugin.core" title="robot_designer_plugin.core"><code class="xref py py-mod docutils literal notranslate"><span class="pre">robot_designer_plugin.core</span></code></a>.</p>
<span class="target" id="module-robot_designer_plugin.core"></span><p>This package is a framework for creating large application-like plugins for Blender. It provides the
Base classes and Python decorators for automatic registration, log files, resource management and
much more.</p>
<p>In the future, it is planned to release this package independently from the HRP/NRP RobotDesigner and
provide mechanisms for the creation of web-based applications for editing.</p>
<p>It consists of submodules for:</p>
<ol class="arabic simple">
<li><p>working with <a class="reference internal" href="glossary.html#term-operator"><span class="xref std std-term">operators</span></a> (<a class="reference internal" href="../apidoc/robot_designer_plugin.core.operators.html#module-robot_designer_plugin.core.operators" title="robot_designer_plugin.core.operators"><code class="xref py py-mod docutils literal notranslate"><span class="pre">robot_designer_plugin.core.operators</span></code></a>),</p></li>
<li><p>simplify Gui development (<a class="reference internal" href="../apidoc/robot_designer_plugin.core.gui.html#module-robot_designer_plugin.core.gui" title="robot_designer_plugin.core.gui"><code class="xref py py-mod docutils literal notranslate"><span class="pre">robot_designer_plugin.core.gui</span></code></a>),</p></li>
<li><p>logging and debugging (<a class="reference internal" href="../apidoc/robot_designer_plugin.core.logfile.html#module-robot_designer_plugin.core.logfile" title="robot_designer_plugin.core.logfile"><code class="xref py py-mod docutils literal notranslate"><span class="pre">robot_designer_plugin.core.logfile</span></code></a>),</p></li>
<li><p>configuration variables (<a class="reference internal" href="../apidoc/robot_designer_plugin.core.config.html#module-robot_designer_plugin.core.config" title="robot_designer_plugin.core.config"><code class="xref py py-mod docutils literal notranslate"><span class="pre">robot_designer_plugin.core.config</span></code></a>),</p></li>
<li><p>automated plugin setup (registration to blender) (<a class="reference internal" href="../apidoc/robot_designer_plugin.core.pluginmanager.html#module-robot_designer_plugin.core.pluginmanager" title="robot_designer_plugin.core.pluginmanager"><code class="xref py py-mod docutils literal notranslate"><span class="pre">robot_designer_plugin.core.pluginmanager</span></code></a>)</p></li>
</ol>
</div>
<div class="section" id="blender-concepts">
<span id="id1"></span><h2>Blender concepts<a class="headerlink" href="#blender-concepts" title="Permalink to this headline"></a></h2>
<p>Blender uses special terminology when developing plugins. Whenever possible, this documentation links to the official
<a class="reference external" href="https://www.blender.org/api/blender_python_api_current/contents.html">Blender API documentation</a>
and <a class="reference external" href="https://www.blender.org/manual/">Blender user manual</a>.</p>
<dl>
<dt>Operators</dt><dd><p>All functionality that modifies a <a class="reference internal" href="glossary.html#term-scene"><span class="xref std std-term">scene</span></a> in Blender is (or at least, should be) encapsulated in
<a class="reference internal" href="glossary.html#term-operator"><span class="xref std std-term">operators</span></a>. These are Python class objects with methods which implement the desired functionality.
In addition, operators can be added as buttons to a GUI defined by the plugin.</p>
<p>These classes have to be <em>registered</em> to Blender, that is, Blender adds the functionality to its namespace (under
a different name). This concept is makes it difficult to exploit the full power provided by modern
<a class="reference internal" href="glossary.html#term-IDE"><span class="xref std std-term">IDEs</span></a> which offer auto completion, introspection and refactoring.
This gap is filled by the <a class="reference internal" href="../apidoc/robot_designer_plugin.core.operators.html#robot_designer_plugin.core.operators.RDOperator" title="robot_designer_plugin.core.operators.RDOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">robot_designer_plugin.core.operators.RDOperator</span></code></a> class. See its documentation
for information and examples on how to use it. All functionality in the RobotDesigner is supposed to be
encapsulated in classes derived from it.</p>
</dd>
<dt>Objects</dt><dd><p>All entitis in a <a class="reference internal" href="glossary.html#term-scene"><span class="xref std std-term">scene</span></a> are <a class="reference external" href="https://docs.blender.org/api/blender_python_api_current/bpy.types.Object.html#bpy.types.Object" title="(in Blender v2.78.0 e8299c8 - API)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bpy.types.Object</span></code></a> in Blender. Their possible types (that is
their associated <a class="reference external" href="https://docs.blender.org/api/blender_python_api_current/bpy.types.Object.html#bpy.types.Object.data" title="(in Blender v2.78.0 e8299c8 - API)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">bpy.types.Object.data</span></code></a>) include</p>
<dl class="simple">
<dt>Armatures (<a class="reference external" href="https://docs.blender.org/api/blender_python_api_current/bpy.types.Armature.html#bpy.types.Armature" title="(in Blender v2.78.0 e8299c8 - API)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bpy.types.Armature</span></code></a>)</dt><dd><p>Skeleton-based articulated objects. In the RobotDesigner they are referred to as (<em>kinematic</em> or <em>robot</em>)
<em>models</em>. They include nested data objects called <em>bones</em> (<code class="xref py py-attr docutils literal notranslate"><span class="pre">bpy.types.Armature.bones</span></code>) which define
the kinematic structure of the articulated object. In the RobotDesigner, they are referred to as <em>segments</em>.
See section <span class="xref std std-ref">segments</span> in the user manual)</p>
</dd>
<dt>Meshes (<a class="reference external" href="https://docs.blender.org/api/blender_python_api_current/bpy.types.Mesh.html#bpy.types.Mesh" title="(in Blender v2.78.0 e8299c8 - API)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bpy.types.Mesh</span></code></a>)</dt><dd><p>Mesh objects have assiciated 3D data in form of connected vertices that define a <em>surface</em> in form of
polygonial meshes. In the Robot designer, they are referred to (<em>rigid body</em>) <em>geometries</em>.</p>
</dd>
<dt>Empty (no data assiciated):</dt><dd><p>Can be used to mark coordinate frames. The RobotDesigner uses them to mark the <span class="xref std std-term">pose</span> of mass
distributions for instance.</p>
</dd>
<dt>Lights, Camera, etc:</dt><dd><p>Various other object types exist that are of no special interest for the RobotDesigner.</p>
</dd>
</dl>
<p>Various Operators defined in the RobotDesigner act upon these objects and are describe blow and in the <span class="xref std std-ref">api</span>.</p>
</dd>
<dt>Properties</dt><dd><p>All values / structures that should be stored in the <em>current</em> file have to be stored in classes derived from
<a class="reference external" href="https://docs.blender.org/api/blender_python_api_current/bpy.types.Property.html#bpy.types.Property" title="(in Blender v2.78.0 e8299c8 - API)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bpy.types.Property</span></code></a>. They can be inserted as input fields in a GUI defined in the plugin.</p>
<p>There are different predefined types for common data types (e.g.,
<a class="reference external" href="https://docs.blender.org/api/blender_python_api_current/bpy.types.StringProperty.html#bpy.types.StringProperty" title="(in Blender v2.78.0 e8299c8 - API)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bpy.types.StringProperty</span></code></a> and <a class="reference external" href="https://docs.blender.org/api/blender_python_api_current/bpy.types.FloatProperty.html#bpy.types.FloatProperty" title="(in Blender v2.78.0 e8299c8 - API)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bpy.types.FloatProperty</span></code></a>) but also structures can be user-defined
by subclasses of <a class="reference external" href="https://docs.blender.org/api/blender_python_api_current/bpy.types.PropertyGroup.html#bpy.types.PropertyGroup" title="(in Blender v2.78.0 e8299c8 - API)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bpy.types.PropertyGroup</span></code></a> which have to be registered to Blender when the plugin is loaded.
Properties must be associated with objects. That way, <em>global</em> properties are associated with the current
<em>scene object</em> (of type <a class="reference external" href="https://docs.blender.org/api/blender_python_api_current/bpy.types.Scene.html#bpy.types.Scene" title="(in Blender v2.78.0 e8299c8 - API)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bpy.types.Scene</span></code></a> in <code class="xref py py-attr docutils literal notranslate"><span class="pre">bpy.context.scene</span></code>), information about models are
with <em>armature object</em> and segment specifications with <em>bone data</em>.</p>
<p>Facilities for registering user-defined data structures are provided by the
<code class="xref py py-class docutils literal notranslate"><span class="pre">robot_designer_plugin.core.pluginmanager.Pluginmanager</span></code> class in the core package.</p>
</dd>
<dt>Panels</dt><dd><p>Panels (<a class="reference external" href="https://docs.blender.org/api/blender_python_api_current/bpy.types.Panel.html#bpy.types.Panel" title="(in Blender v2.78.0 e8299c8 - API)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bpy.types.Panel</span></code></a>) represent a <em>canvas</em> where a plugin can place its GUI elements on. Like all
classes that should be usable by Blender, these have to be registered as well on plugin initialization.
In the <a class="reference external" href="https://docs.blender.org/api/blender_python_api_current/bpy.types.Panel.html#bpy.types.Panel.draw" title="(in Blender v2.78.0 e8299c8 - API)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bpy.types.Panel.draw()</span></code></a> the GUI elements, different graphical types of elements can be placed:</p>
<ul class="simple">
<li><p>Static: e.g. labels, boxes, icons, etc.</p></li>
<li><p>Properties: Registered properties can be used to enable user input (e.g., check boxes
(<a class="reference external" href="https://docs.blender.org/api/blender_python_api_current/bpy.types.BoolProperty.html#bpy.types.BoolProperty" title="(in Blender v2.78.0 e8299c8 - API)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bpy.types.BoolProperty</span></code></a>), or numerical value fields)</p></li>
<li><p>Operators: Are represented as buttons that executes the operator’s functionality on button press.</p></li>
</ul>
<p>The elements are defined <em>sequentially</em>, that is, they are described in the order they should appear. Support
for column and row layouts are given.
In the <a class="reference internal" href="../apidoc/robot_designer_plugin.core.gui.html#module-robot_designer_plugin.core.gui" title="robot_designer_plugin.core.gui"><code class="xref py py-mod docutils literal notranslate"><span class="pre">robot_designer_plugin.core.gui</span></code></a> module some additional classes are given that help defining a gui.
Currently, these are collapsible boxes and automatic display of status messages of operators.</p>
</dd>
</dl>
</div>
<div class="section" id="suggested-plugin-structure-and-templates">
<span id="core-templates"></span><h2>Suggested plugin structure and templates<a class="headerlink" href="#suggested-plugin-structure-and-templates" title="Permalink to this headline"></a></h2>
<p>A plugin using the core should be structured as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;plugin_name&gt;/
├── LICENSE  (A text file describing the licence you are using)
├── README.md (A readme file describing the plugin)
├── __init__.py (The plugin intialization)
├── core (The core package)
│   ├── __init__.py
│   ├── conditions.py
│   ├── config.py
│   ├── gui.py
│   ├── logfile.py
│   ├── operators.py
│   ├── pluginmanager.py
│   ├── property.py
│   └── resources.py
├── interface ((suggested) organize your gui files in separate submodules in a separate package)
│   ├── __init__.py
│   ├── &lt;submodule1&gt;.py
│   └── &lt;submodule2&gt;.py
├── operators ((suggested) organize your operators in separate submodules in a separate package)
│   ├── __init__.py
│   ├── &lt;submodule3&gt;.py
│   └── &lt;submodule4&gt;.py
├── properties ((suggested) organize your properties in separate submodules in a separate package)
│   ├── __init__.py
│   ├── &lt;submodule5&gt;.py
│   └── &lt;submodule6&gt;.py
└── resources (place ressource blend files and additional material (e.g., templates for export) as well as additional python packages
    ├── blender_api (can be autogenerated)
    └── log.txt
</pre></div>
</div>
<p>A template for the toplevel <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> should look like this (in order to allow for reloading which is
recommended for development:</p>
<p>A template for the sub-packages <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> should look like this.</p>
<p>Other templates are given in the module and class descriptions linked in the next section.
They can also be found in the RobotDesigner repository in the <code class="docutils literal notranslate"><span class="pre">resources/templates/</span></code> directory.</p>
</div>
<div class="section" id="api-reference">
<h2>API reference<a class="headerlink" href="#api-reference" title="Permalink to this headline"></a></h2>
<p>How to use the classes and the core framework package can be seen in the <span class="xref std std-ref">core_template</span> section and in the
reference. It is suggested to read the documentation of all sub modules and classes before you start writing
your own plugin or add additional functionality to the RobotDesigner.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/robot_designer_plugin.core.conditions.html">robot_designer_plugin.core.conditions module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/robot_designer_plugin.core.config.html">robot_designer_plugin.core.config module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/robot_designer_plugin.core.gui.html">robot_designer_plugin.core.gui module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/robot_designer_plugin.core.logfile.html">robot_designer_plugin.core.logfile module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/robot_designer_plugin.core.operators.html">robot_designer_plugin.core.operators module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/robot_designer_plugin.core.pluginmanager.html">robot_designer_plugin.core.pluginmanager module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/robot_designer_plugin.core.property.html">robot_designer_plugin.core.property module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/robot_designer_plugin.core.resources.html">robot_designer_plugin.core.resources module</a></li>
</ul>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="environment.html" class="btn btn-neutral float-left" title="Developing the RobotDesigner" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../apidoc/robot_designer_plugin.core.conditions.html" class="btn btn-neutral float-right" title="robot_designer_plugin.core.conditions module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Human Brain Project - Neurorobotics, Benedikt Feldotto (TUM), Stefan Ulbrich (FZI).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>